(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,n){e.exports=n.p+"static/media/logo.d77e78c7.svg"},187:function(e,t,n){e.exports=n(387)},192:function(e,t,n){},216:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},289:function(e,t,n){},290:function(e,t,n){},291:function(e,t,n){},292:function(e,t,n){},293:function(e,t,n){},294:function(e,t,n){},383:function(e,t,n){},384:function(e,t,n){},385:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);for(var a=n(0),o=n.n(a),i=n(9),r=n.n(i),l=(n(192),n(97)),c=n(25),s=n(26),u=n(34),d=n(32),h=n(35),m=n(95),f=n(46),g=n.n(f),C=function(e){return{type:"SET_CURRENT_COLLECTION",collectionId:e}},y=n(391),p=n(393),E=n(94),v=n(87),S=n.n(v),b=n(394),k=n(23),R=n(75),O={ERROR:{"ko-KR":"\uc5d0\ub7ec",ko:"\uc5d0\ub7ec","en-US":"Error",en:"Error"},CONNECTION_ERROR:{"ko-KR":"\uc11c\ubc84 \uc5f0\uacb0 \uc5d0\ub7ec",ko:"\uc11c\ubc84 \uc5f0\uacb0 \uc5d0\ub7ec","en-US":"Server Connection Error",en:"Server Connection Error"},BASIC_SEARCH:{"ko-KR":"\uc77c\ubc18 \uac80\uc0c9",ko:"\uc77c\ubc18 \uac80\uc0c9","en-US":"Basic Search",en:"Basic Search"},SIMILAR_DOCUMENT_SEARCH:{"ko-KR":"\uc720\uc0ac\ubb38\uc11c \uac80\uc0c9",ko:"\uc720\uc0ac\ubb38\uc11c \uac80\uc0c9","en-US":"Similar Document Search",en:"Similar Document Search"},PHRASAL_SEARCH:{"ko-KR":"\uad6c\ubb38 \uac80\uc0c9",ko:"\uad6c\ubb38 \uac80\uc0c9","en-US":"Phrasal Search",en:"Phrasal Search"},QUERY_BAR_PLACEHOLDER:{"ko-KR":"\uac80\uc0c9\ud558\uc2e4 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694",ko:"\uac80\uc0c9\ud558\uc2e4 \ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694","en-US":"Please input any query",en:"Please input any query"},RESULT_CARD_TITLE:{"ko-KR":"\uac80\uc0c9 \uacb0\uacfc",ko:"\uac80\uc0c9 \uacb0\uacfc","en-US":"Search Results",en:"Search Results"},QUERY_HISTORY_CARD_TITLE:{"ko-KR":"\uac80\uc0c9 \ud788\uc2a4\ud1a0\ub9ac",ko:"\uac80\uc0c9 \ud788\uc2a4\ud1a0\ub9ac","en-US":"Query History",en:"Query History"},CLASSIFICATION_CARD_TITLE:{"ko-KR":"\uad6c\ubd84",ko:"\uad6c\ubd84","en-US":"Classification",en:"Classification"},WORD_STATISTICS_CARD_TITLE:{"ko-KR":"\ub2e8\uc5b4 \ud1b5\uacc4",ko:"\ub2e8\uc5b4 \ud1b5\uacc4","en-US":"Word Statistics",en:"Word Statistics"},FIELDS:{"ko-KR":"\ud544\ub4dc",ko:"\ud544\ub4dc","en-US":"Fields",en:"Fields"},FIELD_NAME:{"ko-KR":"\ud544\ub4dc\uba85",ko:"\ud544\ub4dc\uba85","en-US":"Field Name",en:"Field Name"},FIELD_VALUE:{"ko-KR":"\ud544\ub4dc\uac12",ko:"\ud544\ub4dc\uac12","en-US":"Field Value",en:"Field Value"},ANNOTATIONS:{"ko-KR":"\uc5b4\ub178\ud14c\uc774\uc158",ko:"\uc5b4\ub178\ud14c\uc774\uc158","en-US":"Annotations",en:"Annotations"},WORD_CLOUD:{"ko-KR":"\uc6cc\ub4dc\ud074\ub77c\uc6b0\ub4dc",ko:"\uc6cc\ub4dc\ud074\ub77c\uc6b0\ub4dc","en-US":"Word Cloud",en:"Word Cloud"},WORD:{"ko-KR":"\uc6cc\ub4dc",ko:"\uc6cc\ub4dc","en-US":"Word",en:"Word"},COUNT:{"ko-KR":"\uac1c\uc218",ko:"\uac1c\uc218","en-US":"Count",en:"Count"},LOADING:{"ko-KR":"\ub85c\ub529\uc911...",ko:"\ub85c\ub529\uc911...","en-US":"Loading...",en:"Loading..."}},I={},_=Object.keys(O),L=_.length,N=navigator.language||"en-US",A=0;A<L;A++)I[_[A]]=O[_[A]][N];n(216);var D=R.a.Option,T=0,x=1,w=2,P=function(e){var t=e.size,n=e.value,a=e.onChange,i=e.disabled,r=e.style;return o.a.createElement(R.a,{className:"QueryModeSelect",size:t,value:n,onChange:a,disabled:i,style:r},o.a.createElement(D,{value:T},I.BASIC_SEARCH),o.a.createElement(D,{value:x},I.SIMILAR_DOCUMENT_SEARCH),o.a.createElement(D,{value:w},I.PHRASAL_SEARCH))};P.defaultProps={size:"default",value:T,onChange:function(){},disabled:!1};var M=P,j=(n(271),b.a.TextArea),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInputBlur=function(){n.setState({isFocused:!1})},n.handleInputFocus=function(){n.setState({isFocused:!0})},n.handleKeyPress=function(e){var t=e.key?e.key:e.keyCode?e.keyCode:e.which;if(!e.shiftKey&&!e.altKey&&(13===t||"Enter"===t))return e.preventDefault(),void n.props.onSearch()},n.state={isFocused:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.queryMode,n=e.onChangeQueryMode,a=e.onChangeInput,i=e.inputValue,r=e.onClear,l=e.onSearch,c=e.placeholder,s=e.disabled,u=e.style;return o.a.createElement("div",{className:"QueryBar",sytle:u},o.a.createElement(M,{value:t,onChange:n,disabled:s,style:{margin:"1px 0px",minWidth:205}}),o.a.createElement("div",{className:"QueryBar-container",style:{height:this.state.isFocused?"auto":"34px",overflow:this.state.isFocused?"auto":"hidden"}},o.a.createElement(j,{disabled:s,placeholder:c,autosize:!0,onChange:a,style:{marginRight:"8px",resize:"none",border:"none",boxShadow:"none"},value:i,onBlur:this.handleInputBlur,onFocus:this.handleInputFocus,onKeyPress:this.handleKeyPress}),o.a.createElement(k.a,{icon:"close",onClick:r,style:{border:"none"}}),o.a.createElement(k.a,{icon:"search",onClick:l,style:{border:"none"}})))}}]),t}(a.Component);U.defaultProps={onChangeInput:function(){},inputValue:"",onClear:function(){},onSearch:function(){},placeholder:"Please input any query",disabled:!1};var q=U,Q=n(62),F=n.n(Q),H=n(395),W=n(96),z=n(397),B=(n(272),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).setCardRef=function(e){e.current&&(n.cardBody=e.current.childNodes[1])},n.handlePageChange=function(e){n.setState({currentPage:e})},n.componentDidUpdate=function(e,t){t.currentPage!==n.state.currentPage&&n.cardBody&&(n.cardBody.scrollTop=0),e.isLoading&&!n.props.isLoading&&n.setState({currentPage:1})},n.state={currentPage:1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.title,a=e.data,i=e.isLoading,r=e.onClickDocument,l=e.pageSize,c=e.renderRow,s=this.state.currentPage,u=a.length,d=a.slice(l*(s-1),l*s);return o.a.createElement(H.a,{className:F()("ResultCard",t),title:"".concat(n," (Top ").concat(u,")"),bodyStyle:{overflow:"scroll",height:"calc(100% - 110.5px)",padding:"8px 24px"},ref:this.setCardRef,actions:[o.a.createElement(W.a,{size:"small",total:u,showTotal:function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},pageSize:l,current:s,onChange:this.handlePageChange})]},o.a.createElement(z.a,{itemLayout:"horizontal",loading:i,dataSource:d,renderItem:c(r)}))}}]),t}(a.Component));B.defaultProps={data:[],title:"Results",isLoading:!1,onClickDocument:function(){},pageSize:10,renderRow:function(){return o.a.createElement("div",null)}};var K=B,V=n(396),Y=(n(289),function(e){return e>=70?"rgb(165,206,91)":e>=50&&e<70?"rgb(238,191,45)":"rgb(220,43,3)"}),G=function(e){var t=e.probability,n=e.label,a=e.onClick,i=Math.round(1e3*t)/10;return o.a.createElement("div",{className:"ClassifierResultContainer",onClick:a},o.a.createElement("div",{className:"ClassifierResultContainer-body"},o.a.createElement("div",{className:"ClassifierResultContainer-progressbar-text"},"Probability"," ",o.a.createElement("span",{style:{color:"".concat(Y(i))}},i,"%")),o.a.createElement("div",{className:"ClassifierResultContainer-progressbar"},o.a.createElement("div",{style:{height:"100%",width:"calc(".concat(i/100," * 100%)"),backgroundColor:"".concat(Y(i))}})),o.a.createElement("div",null,o.a.createElement(V.a,{color:"orange"},n))))};G.defaultProps={probability:0,label:"not available"};var J=G,X=(n(290),function(e){var t=e.className,n=e.title,a=e.data,i=e.isLoading;return o.a.createElement(H.a,{className:F()("ClassificationCard",t),title:n,bodyStyle:{overflow:"scroll",height:"calc(100% - 56px)"}},o.a.createElement(z.a,{itemLayout:"horizontal",loading:i,dataSource:a,renderItem:function(e){return o.a.createElement(J,{key:"".concat(e.probability,"-").concat(e.label),label:e.label,probability:e.probability})}}))});X.defaultProps={title:"Classification",data:[],isLoading:!1};var Z=X,$=(n(291),function(e){var t=e.query,n=e.date,a=e.onClick,i=e.queryMode,r=e.isCurrent,l=e.collectionName,c=0===i?I.BASIC_SEARCH:1===i?I.SIMILAR_DOCUMENT_SEARCH:I.PHRASAL_SEARCH,s=0===i?"red":1===i?"cyan":"blue";return o.a.createElement("div",{className:"QueryListItem",onClick:r?null:a},r&&o.a.createElement(V.a,{color:"#87d068",style:{marginBottom:"8px"}},"Current"),o.a.createElement(V.a,{color:s},c),o.a.createElement(V.a,null,"Collection: ",l),o.a.createElement("div",{style:{fontSize:"14px",marginBottom:"8px",whiteSpace:"pre-wrap"}},t.length>300?"".concat(t.slice(0,300),"..."):t),o.a.createElement("div",{className:"QueryListItem-footer"},n))});$.defaultProps={query:"",date:0,onClick:function(){},queryMode:0,isCurrent:!1};var ee=function(e){var t=e.className,n=e.title,a=e.data,i=e.isLoading,r=e.onClickQuery,l=a.length-1||0;return o.a.createElement(H.a,{className:F()("QueryHistoryCard",t),loading:i,title:n,bodyStyle:{overflow:"scroll",height:"calc(100% - 56px)",padding:"8px 16px"}},o.a.createElement(z.a,{dataSource:a,renderItem:function(e){return o.a.createElement($,{query:e.query,date:S()(e.date).format("LLL"),onClick:r.bind(void 0,e.index,e.query,e.queryMode),isCurrent:l===e.index,queryMode:e.queryMode,collectionName:e.collection.name})}}))};ee.defaultProps={title:"Query History",data:[],isLoading:!1,onClickQuery:function(){}};var te=ee,ne=(n(292),R.a.Option),ae=function(e){var t=e.collections,n=e.currentCollectionId,a=e.onChangeCollection,i=e.onClickRefresh,r=e.isLoadingCollection;return o.a.createElement("div",{className:"CollectionSelect"},o.a.createElement(R.a,{className:"CollectionSelect-select",value:n,onChange:a,disabled:r},t.map(function(e){return o.a.createElement(ne,{key:e.id,value:e.id},e.name)})),o.a.createElement(k.a,{type:"primary",loading:r,icon:"reload",onClick:i}))};ae.defaultProps={collections:[],currentCollectionId:"",onChange:function(){},onClickRefresh:function(){}};var oe=ae,ie=n(129),re=n(392),le=n(70),ce=n(55),se=n(178),ue=n.n(se),de=(n(293),{blue:["#95c4f3","#56acf2","#009bef","#047cc0","#175d8d","#1c496d"],red:["#ffaa9d","#ff806c","#ff5c49","#e62325","#aa231f","#83231e"],green:["#57d785","#34bc6e","#00aa5e","#00884b","#116639","#12512e"]}),he=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).setSvgRef=function(e){n.svg=ce.e(e),n.svgElement=e},n.createWords=function(e){if(0===e.length)return[];var t=ce.a(e,function(e){return e.count}),a=ce.b(e,function(e){return e.count}),o=ce.c().domain([a,t]).range([14,32]),i=ce.d().domain([a,t]).range(["lighter","normal","bold","bolder"]),r=ce.d().domain([a,t]).range(de[n.props.colorSet]),l=e.map(function(e,t){return{id:t,fontSize:o(e.count),fontWeight:i(e.count),text:e.annotation,count:e.count,color:r(e.count)}});return l.sort(function(e,t){return t.count-e.count}),l},n.renderWordCloud=function(e,t,a){n.svg.select("g").selectAll("*").remove();var o=n.createWords(e),i=ue()().size([t,a]).words(o).text(function(e){return e.text}).rotate(function(){return 0}).fontSize(function(e){return e.fontSize}).on("end",n.draw.bind(Object(le.a)(Object(le.a)(n)),t,a));i.start(),i.stop()},n.draw=function(e,t,a){var o=n.svg.attr("viewBox","0 0 "+e+" "+t).select("g").attr("transform","translate("+e/2+","+t/2+")").selectAll(".wordCloud").data(a,function(e){return e.index});o.exit().remove(),o=o.enter().append("text").classed("wordCloud",!0).attr("transform",function(e){return"translate("+[e.x,e.y]+")rotate("+e.rotate+")"}).attr("text-anchor","middle").attr("font-size",function(e){return e.fontSize}).attr("font-weight",function(e){return e.fontWeight}).style("fill",function(e){return e.color}).text(function(e){return e.text})},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.renderWordCloud(this.props.data,this.svgElement.clientWidth,this.svgElement.clientHeight)}},{key:"componentDidUpdate",value:function(e){(e.data.length!==this.props.data.length||this.isDataChanged(e.data,this.props.data))&&this.renderWordCloud(this.props.data,this.svgElement.clientWidth,this.svgElement.clientHeight)}},{key:"componentWillUnmount",value:function(){this.svg=null,this.svgElement=null}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return o.a.createElement("svg",{width:t,height:n,ref:this.setSvgRef},o.a.createElement("g",null))}},{key:"isDataChanged",value:function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n].annotation!==t[n].annotation)return!0;return!1}}]),t}(a.Component);he.defaultProps={data:[],colorSet:"blue"};var me=he,fe=(n(294),ie.a.TabPane),ge=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).setModalBodyContentRef=function(e){n.modalBodyContent=e},n.renderFieldTable=function(e,t,a){var i=[],r=0;for(var l in e)"body"!==l&&"___highlighting"!==l&&"___annotations"!==l&&i.push({key:r++,fieldName:l,fieldValue:e[l]});var c=[{title:I.FIELD_NAME,dataIndex:"fieldName",key:"fieldName",sorter:function(e,t){return e.fieldName<t.fieldName?-1:e.fieldName>t.fieldName?1:0},defaultSortOrder:"ascend"},{title:I.FIELD_VALUE,dataIndex:"fieldValue",key:"fieldValue"}];return o.a.createElement(re.a,{columns:c,dataSource:i,size:"middle",pagination:{pageSize:t||5,hideOnSinglePage:!0,current:a,onChange:function(e,t){n.setState({currentFieldPage:e})}}})},n.renderWordTable=function(e,t,i){if(!e||0===e.length)return o.a.createElement("div",{class:"ant-list-empty-text"},"No data");var r=[{title:I.WORD,dataIndex:"annotation",key:"annotation"},{title:I.COUNT,dataIndex:"count",key:"count"}];return o.a.createElement(a.Fragment,null,o.a.createElement(me,{width:"100%",height:"30vh",data:e.length>50?e.slice(0,50):e}),o.a.createElement(re.a,{rowKey:"annotation",columns:r,dataSource:e,size:"middle",pagination:{pageSize:t||10,hideOnSinglePage:!0,current:i,onChange:function(e,t){n.setState({currentWordPage:e})}}}))},n.state={currentFieldPage:1,currentWordPage:1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(e,t){this.props.visible||1===this.state.currentFieldPage||this.setState({currentFieldPage:1,currentWordPage:1}),!e.visible&&this.modalBodyContent&&(this.modalBodyContent.scrollTop=0)}},{key:"render",value:function(){var e=this.props,t=e.doc,n=e.fieldPageSize,a=e.wordPageSize,i=e.visible,r=e.onOk,l=e.onCancel,c=e.footer,s=this.state,u=s.currentFieldPage,d=s.currentWordPage;return o.a.createElement(p.a,{title:t.title||"No title",visible:i,onCancel:l,onOk:r,width:"90%",footer:c},o.a.createElement("div",{className:"DocumentDetailModal-body"},o.a.createElement("div",{className:"DocumentDetailModal-body-content",ref:this.setModalBodyContentRef},t.___highlighting?o.a.createElement("div",{dangerouslySetInnerHTML:{__html:"".concat(t.___highlighting)}}):t.body),o.a.createElement("div",{className:"DocumentDetailModal-body-field"},o.a.createElement(ie.a,{defaultActiveKey:"fields"},o.a.createElement(fe,{tab:I.FIELDS,key:"fields"},this.renderFieldTable(t,n,u)),o.a.createElement(fe,{tab:I.WORD_CLOUD,key:"wordcloud"},this.renderWordTable(t.___annotations,a,d))))))}}]),t}(a.Component);ge.defaultProps={doc:{title:"",body:""},visible:!1,fieldPageSize:10,wordPageSize:10,footer:null};var Ce=ge,ye=n(390),pe=(n(383),function(e){var t=e.title,n=e.body,a=e.highlighting,i=e.onClick,r=e.index,c=e.style;return o.a.createElement(z.a.Item,{className:"BasicRow",style:Object(l.a)({},c),onClick:i},o.a.createElement(z.a.Item.Meta,{avatar:o.a.createElement(ye.a,{className:"BasicRow-avatar",size:"large"},r),title:t.length<100?t:t.slice(0,100)+"...",description:a?o.a.createElement("div",{dangerouslySetInnerHTML:{__html:"".concat(a.length<500?a:a.slice(0,500)+"...")}}):n.length<500?n:n.slice(0,500)+"..."}))});pe.defaultProps={title:"",body:"",highlighting:"",onClick:function(){},index:0};var Ee=pe,ve=(n(384),function(e){var t=e.data,n=e.title,a=e.body,i=e.highlighting,r=e.onClick,l=e.index;return o.a.createElement("div",{className:"WordCloudRow"},o.a.createElement(Ee,{title:n,body:a,highlighting:i,onClick:r,index:l}),o.a.createElement(me,{width:"100%",height:"100%",data:t}))});ve.defaultProps={data:[],title:"",body:"",highlighting:o.a.createElement("span",null),onClick:function(){},index:0};var Se=ve,be="http://khwex-sd-host.fyre.ibm.com:8100",ke=function(e,t,n){return g()({method:"POST",url:"".concat(be,"/basic-query"),headers:{"Content-Type":"application/json"},data:{collectionId:e,query:t,docCount:n}}).then(function(e){return e.data})},Re=function(e,t){return g()({url:"".concat(be,"/classify"),method:"POST",headers:{"Content-Type":"application/json"},data:{collectionId:e,query:t}}).then(function(e){return e.data})},Oe=function(e,t,n){return g()({url:"".concat(be,"/similar-document-query"),method:"POST",headers:{"Content-Type":"application/json"},data:{collectionId:e,query:t,docCount:n}}).then(function(e){return e.data})},Ie=function(e,t,n){return g()({url:"".concat(be,"/phrasal-query"),method:"POST",headers:{"Content-Type":"application/json"},data:{collectionId:e,query:t,docCount:n}}).then(function(e){return e.data})},_e=new(function(){function e(){if(Object(c.a)(this,e),this.storageAvailable=function(e){try{var t=window[e],n="__storage_test__";return t.setItem(n,n),t.removeItem(n),!0}catch(a){return a instanceof DOMException&&(22===a.code||1014===a.code||"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&0!==t.length}},!this.storageAvailable("localStorage"))throw new Error("localStorage not available for your browser")}return Object(s.a)(e,[{key:"getItem",value:function(e){return localStorage.getItem(e)}},{key:"setItem",value:function(e,t){localStorage.setItem(e,t)}},{key:"clear",value:function(){localStorage.clear()}},{key:"removeItem",value:function(e){localStorage.removeItem(e)}}]),e}()),Le=n(184),Ne=n.n(Le),Ae=(n(385),n(386),y.a.Header),De=y.a.Content,Te=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCollectionChange=function(e){n.props.setCurrentCollection(e),_e.setItem("defaultCollectionId",e)},n.handleCollectionRefreshClick=function(){n.props.fetchCollections()},n.handleQueryModeChange=function(e){n.setState({nextQueryMode:e})},n.handleQueryInputChange=function(e){var t=e.target.value;n.setState({query:t})},n.handleClearQuery=function(){n.setState({query:""})},n.handleSearch=function(){n.state.query.length>0&&n.handleSendQuery(n.state.query)},n.handleSendQuery=function(e){n.fetchAnalysisData(e)},n.handleModalClickOk=function(){n.setState({modalVisible:!1})},n.handleModalClickCancel=function(){n.setState({modalVisible:!1})},n.handleDocumentClick=function(e){n.setState({modalVisible:!0,selectedDocument:Object(l.a)({},e)})},n.handleClickQuery=function(e,t,a,o){n.setState({nextQueryMode:a,query:t},function(){n.fetchAnalysisData(t)})},n.fetchAnalysisData=function(e){var t;n.setState({isClassificationDataLoading:!0,isDocumentsLoading:!0});var a=n.props.currentCollection.id;switch(n.state.nextQueryMode){case T:t=Promise.all([Re(a,e),ke(a,e,30)]);break;case w:t=Promise.all([Re(a,e),Ie(a,e,30)]);break;default:case x:t=Promise.all([Re(a,e),Oe(a,e,30)])}return t.then(function(t){n.setState(function(n,a){var o=n.queryHistory.length;return{queryMode:n.nextQueryMode,isClassificationDataLoading:!1,isDocumentsLoading:!1,classificationData:t[0].classes,documents:t[1].docs,queryHistory:[{index:o,query:e,date:S()().valueOf(),queryMode:n.nextQueryMode,collection:a.currentCollection}].concat(n.queryHistory)}})}).catch(function(e){console.error(e),p.a.error({title:I.ERROR,content:e.message}),n.setState({isClassificationDataLoading:!1,isDocumentsLoading:!1})})},n.state={isApplicationLoading:!0,query:"",queryMode:x,nextQueryMode:x,classificationData:[],isClassificationDataLoading:!1,documents:[],isDocumentsLoading:!1,wordStats:[],queryHistory:[],selectedDocument:{title:"",body:"",date:""},modalVisible:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat(be,"/connection")).then(function(e){return e.data}).then(function(t){e.props.fetchCollections(_e.getItem("defaultCollectionId")),e.setState({isApplicationLoading:!1})}).catch(function(e){console.error(e),e.response?p.a.error({title:I.CONNECTION_ERROR,content:"CODE: ".concat(e.response.data.code," / Message: ").concat(e.response.data.message)}):p.a.error({title:I.ERROR,content:e.message})})}},{key:"render",value:function(){var e=this.state,t=e.isApplicationLoading,n=e.query,a=e.nextQueryMode,i=e.queryMode,r=e.classificationData,l=e.isClassificationDataLoading,c=e.documents,s=e.isDocumentsLoading,u=e.queryHistory,d=e.selectedDocument,h=e.modalVisible,m=this.props,f=m.isFetchingCollections,g=m.currentCollection,C=m.collections;return o.a.createElement(y.a,{className:"App"},o.a.createElement(Ae,{className:"App-header"},o.a.createElement("div",{className:"App-header-container"},o.a.createElement("img",{className:"App-logo",src:Ne.a,alt:"logo",height:"40"}),o.a.createElement("div",{className:"App-name-container"},o.a.createElement("div",{className:"App-name-title"},"IBM Cognitive Knowledge Service"),o.a.createElement("div",{className:"App-name-subtitle"},"powered by Watson Explorer oneWEX ver.12.0.1")),o.a.createElement(oe,{collections:C,currentCollectionId:g.id,onChangeCollection:this.handleCollectionChange,onClickRefresh:this.handleCollectionRefreshClick,isLoadingCollection:f})),o.a.createElement(q,{inputValue:n,onChangeInput:this.handleQueryInputChange,onClear:this.handleClearQuery,onSearch:this.handleSearch,queryMode:a,onChangeQueryMode:this.handleQueryModeChange,placeholder:I.QUERY_BAR_PLACEHOLDER,disabled:t})),o.a.createElement(y.a,{className:"App-body"},o.a.createElement(E.a,{size:"large",tip:I.LOADING,style:{maxHeight:"100%"},spinning:t},o.a.createElement(De,{className:"App-body-content"},o.a.createElement("div",{className:"App-body-content-column",style:{gridTemplateRows:"1fr 3fr"}},o.a.createElement(Z,{title:I.CLASSIFICATION_CARD_TITLE,isLoading:l,data:r}),o.a.createElement(te,{title:I.QUERY_HISTORY_CARD_TITLE,isLoading:!1,data:u,onClickQuery:this.handleClickQuery})),o.a.createElement("div",{className:"App-body-content-column",style:{gridTemplateRows:"1fr"}},o.a.createElement(K,{title:I.RESULT_CARD_TITLE,isLoading:s,data:c,onClickDocument:this.handleDocumentClick,renderRow:this.renderRow(i)}))))),o.a.createElement(Ce,{doc:d,visible:h,onOk:this.handleModalClickOk,onCancel:this.handleModalClickCancel}))}},{key:"renderRow",value:function(e){var t=this;switch(e){case x:return function(e){return function(n){var a=n.rank,i=n.title,r=n.body,l=n.___highlighting||"",c=n.___annotations;return o.a.createElement(Se,{index:a,title:i,body:r,highlighting:l,onClick:e.bind(t,n),data:c.slice(0,20)})}};case T:case w:default:return function(e){return function(n){var a=n.rank,i=n.title,r=n.body,l=n.___highlighting||"";return o.a.createElement(Ee,{index:a,title:i,body:r,highlighting:l,onClick:e.bind(t,n)})}}}}}]),t}(a.Component),xe=Object(m.b)(function(e){return{isFetchingCollections:e.collections.isFetching,currentCollection:e.collections.currentItem,collections:e.collections.items}},function(e){return{fetchCollections:function(t){return e(function(e){return function(t){return t({type:"REQUEST_COLLECTIONS"}),g.a.get("".concat("http://khwex-sd-host.fyre.ibm.com:8100","/collections")).then(function(e){return e.data}).then(function(n){var a=n.collections.map(function(e){return{id:e.id,name:e.name}}),o=!1;if(e)for(var i=0,r=a.length;i<r;i++)if(a[i].id===e){o=!0;break}t({type:"SET_COLLECTIONS",collections:a}),t(C(o?e:a.length>0?a[0].id:""))}).catch(function(e){return console.error(e.message)})}}(t))},setCurrentCollection:function(t){return e(C(t))}}})(Te),we=n(52),Pe=n(185),Me=Object(we.c)({collections:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,currentItem:{name:"",id:""},items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_COLLECTIONS":return Object.assign({},e,{items:t.collections,isFetching:!1});case"SET_CURRENT_COLLECTION":for(var n=e.items,a=e.items.length,o=null,i=0;i<a;i++)n[i].id===t.collectionId&&(o=n[i]);return Object.assign({},e,{currentItem:o});case"REQUEST_COLLECTIONS":return Object.assign({},e,{isFetching:!0});default:return e}}});var je=Object(we.d)(Me,Object(we.a)(Pe.a));r.a.render(o.a.createElement(m.a,{store:je},o.a.createElement(xe,null)),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.51818ff5.chunk.js.map